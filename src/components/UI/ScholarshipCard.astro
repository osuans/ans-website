---
import Card from './Card.astro';
import { formatDate } from '../../utils/dateUtils';
import { capitalize } from '../../utils/stringHelpers';
import { CONFIG } from '../../constants';

interface Props {
  name: string;
  type: 'scholarship' | 'fellowship' | 'internship';
  amount: number;
  deadline: Date;
  description: string;
  slug: string;
  applicationUrl?: string;
  showTypeBadge?: boolean;
}

const { name, type, amount, deadline, description, slug, applicationUrl, showTypeBadge = false } = Astro.props;

const typeLabel = capitalize(type);
---

<Card title={name} href={`/scholarships/${slug}`}>
  {showTypeBadge && (
    <div class="mb-2">
      <span class="inline-block px-2 py-1 text-xs font-semibold text-white bg-primary-600 rounded">
        {typeLabel}
      </span>
    </div>
  )}
  <div class="mb-3 flex items-center text-gray-600">
    <span class="font-bold">Amount:</span>
    <span class="ml-2">${amount.toLocaleString()}</span>
  </div>
  <div class="mb-3 flex items-center text-gray-600">
    <span class="font-bold">Deadline:</span>
    <span class="ml-2">{formatDate(deadline)}</span>
  </div>
  <p class="text-gray-700 mb-4">{description.substring(0, CONFIG.PAGINATION.DESCRIPTION_PREVIEW_LENGTH)}...</p>
  <div class="flex items-center justify-between">
    <p class="text-primary-600 font-medium group-hover:underline group-hover:text-primary-700">
      Learn More →
    </p>
    {applicationUrl && (
      <a
        href={applicationUrl}
        target="_blank"
        rel="noopener noreferrer"
        class="inline-block px-3 py-1.5 text-sm font-semibold text-white bg-primary-600 rounded hover:bg-primary-700 transition-colors"
        onclick="event.stopPropagation()"
      >
        Apply →
      </a>
    )}
  </div>
</Card>
