---
import { getEntry } from 'astro:content';
import AdminLayout from '../../../layouts/AdminLayout.astro';
import DeleteConfirmation from '../../../components/admin/DeleteConfirmation.astro';

export const prerender = false;

const { slug } = Astro.params;

if (!slug) {
  return Astro.redirect('/admin');
}

const event = await getEntry('events', slug);

if (!event) {
  return new Response(`Event with slug "${slug}" not found.`, { status: 404 });
}
---
<AdminLayout title={`Delete Event: ${event.data.title}`}>
  <DeleteConfirmation
    itemName={event.data.title}
    itemType="event"
    slug={event.slug}
    apiEndpoint="/api/events/delete"
  />
</AdminLayout>